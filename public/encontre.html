<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportar Hallazgo | Central Santua</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="encontrestyle.css">
</head>
<body>

   <header class="navbar">
    <nav class="container-nav-ajustado">
        <a href="index.html" class="logo-link">
            <h1 class="logo">CENTRAL<span>SANTUA</span></h1>
        </a>

        <div class="nav-acciones">
            <div id="auth-buttons" class="auth-container">
                <a href="login.html" class="btn-auth login">Ingresar</a>
                <a href="registro.html" class="btn-auth registro">Registrarse</a>
            </div>

            <button id="boton-menu-privado" class="boton-menu" onclick="toggleMenu()" style="display: none;" aria-label="Abrir men√∫">
                <span class="barrita"></span>
                <span class="barrita"></span>
                <span class="barrita"></span>
            </button>
        </div>
    </nav>
</header>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("token"); 
        const authSection = document.getElementById("auth-buttons");
        const menuBtn = document.getElementById("boton-menu-privado");

        if (token) {
            // USUARIO LOGUEADO: Forzamos mostrar men√∫ y ocultar botones
            if (authSection) authSection.style.setProperty("display", "none", "important");
            if (menuBtn) menuBtn.style.setProperty("display", "flex", "important");
        } else {
            // USUARIO NO LOGUEADO: Forzamos ocultar men√∫ y mostrar botones
            if (authSection) authSection.style.setProperty("display", "flex", "important");
            if (menuBtn) menuBtn.style.setProperty("display", "none", "important");
        }
    });
</script>

<div id="side-menu" class="menu-lateral">
    <a href="javascript:void(0)" class="cerrar-btn" onclick="toggleMenu()">&times;</a>
    <a href="index.html">Inicio</a>
    <a href="encontre.html">Encontre algo</a>
    <a href="perdi.html">Perdi algo</a>
    <a href="perfil.html">Administrar Codigos QR</a>
    <a href="tutorial.html">¬øC√≥mo funciona?</a>
    <a href="ayuda.html">Ayuda</a>
    <a href="javascript:void(0)" onclick="abrirModalTerminos(event)">T√©rminos y Condiciones</a>
    <a href="javascript:void(0)" onclick="cerrarSesion()" style="color: #ff4d4d; font-weight: bold;">Cerrar Sesi√≥n</a>
</div>

<script>
    function toggleMenu() {
        const menu = document.getElementById("side-menu");
        // Verificamos el ancho actual para saber si abrir o cerrar
        if (menu.style.width === "250px") {
            menu.style.width = "0";
        } else {
            menu.style.width = "250px";
        }
    }

    function cerrarSesion() {
        localStorage.removeItem("token");
        window.location.href = "index.html";
    }
</script>

    <main class="main-layout">
        
        <aside class="sidebar-info">
            <div class="glass-card">
                <h3>‚ö†Ô∏è Instrucci√≥n de Carga</h3>
                <p id="instruccion-dinamica" style="color: #4facfe; font-weight: bold; border-left: 3px solid #4facfe; padding-left: 10px;">
                    Seleccion√° una opci√≥n para iniciar.
                </p>
                <p style="font-size: 0.9em; margin-top: 10px;">
                    Al ingresar el n√∫mero, <strong>NO uses puntos, NO uses espacios, ni guiones</strong>. Escrib√≠ los caracteres todos juntos.
                </p>
            </div>

            <div class="glass-card">
                <h3>El Proceso de Devoluci√≥n</h3>
                <ol style="padding-left: 18px; font-size: 0.85em; color: #ccc;">
                    <li>Registr√°s el objeto encontrado.</li>
                    <li>Buscamos coincidencias con el due√±o.</li>
                    <li>Validamos la identidad del reclamante.</li>
                    <li>Coordinamos el encuentro seguro.</li>
                </ol>
            </div>
        </aside>

        <section class="form-container">
            <div class="hero-section">
                <h2>¬øQu√© encontraste?</h2>
                <p id="subtitulo">Seleccion√° una categor√≠a para registrar el hallazgo.</p>
            </div>

            <div class="selection-grid" id="step-1">
                <button class="select-btn" onclick="selectType('DNI')">üÜî DNI / Documento</button>
                <button class="select-btn" onclick="selectType('PATENTE')">üöó Patente (Auto/Moto)</button>
                <button class="select-btn" onclick="selectType('LICENCIA')">üí≥ Licencia de Conducir</button>
                <button class="select-btn" onclick="selectType('CEDULA')">üìÑ C√©dula Vehicular</button>
            </div>

            <form class="report-form" id="step-2" style="display: none;">
                <input type="hidden" id="tipo-hallazgo">
                
                <div class="input-group">
                    <label id="label-nro">N√∫mero de Hallazgo</label>
                    <input type="text" id="nro-id" placeholder="Ej: 35123456 o A123BCD" oninput="validarLongitud(this)" required>
                    <small id="ayuda-especifica" style="color: #4facfe; display: block; margin-top: 5px; font-weight: 500;"></small>
                </div>

                <div class="input-group">
                    <label>Tu WhatsApp de contacto</label>
                    <input type="tel" id="whatsapp" placeholder="Ej: 1122334455" required>
                </div>

                <div class="verificacion-box">
                    <p>üõ°Ô∏è <strong>FILTRO DE SEGURIDAD:</strong> Central Santua act√∫a como intermediario para proteger tu privacidad y validar al due√±o.</p>
                </div>
                
                <div class="terminos-container">
    <input type="checkbox" id="acepto-terminos" required>
    <label for="acepto-terminos">
        Acepto los <a href="#" onclick="abrirModalTerminos()">T√©rminos y Condiciones</a> de Central Santua.
    </label>
</div>

                <button type="submit" class="btn-enviar">PUBLICAR HALLAZGO</button>
                <button type="button" class="btn-cancelar" onclick="location.reload()" style="background: none; border: 1px solid #444; color: #888; margin-top: 10px; width: 100%; padding: 10px; border-radius: 8px; cursor: pointer;">
                    ‚Üê Volver a elegir categor√≠a
                </button>
            </form>
        </section>

    </main>

    <div id="modal-resultado" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="modal-icono" class="modal-icon">‚úÖ</div>
            <h2 id="modal-titulo">Registro Exitoso</h2>
            <p id="modal-mensaje">Cargando...</p>
            
            <div id="area-contacto" style="display: none;">
                </div>

            <button onclick="cerrarModal()" class="btn-cerrar-modal" id="btn-entendido" style="margin-top: 20px;">Entendido</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Central Santua - Gracias por ser parte del cambio.</p>
    </footer>

    <script src="script.js"></script>
    <script>
        function selectType(tipo) {
    // 1. AVISAR AL SCRIPT.JS
    if (typeof seleccionarCategoria === "function") {
        seleccionarCategoria(tipo);
    }
    
    // 2. Manejo de Interfaz
    document.getElementById('step-1').style.display = 'none';
    document.getElementById('step-2').style.display = 'block';
    document.getElementById('tipo-hallazgo').value = tipo;
    
    const inst = document.getElementById('instruccion-dinamica');
    const ayuda = document.getElementById('ayuda-especifica');
    const label = document.getElementById('label-nro');
    const subtitulo = document.getElementById('subtitulo');
    const inputPrincipal = document.getElementById('nro-id'); // Referencia al input

    subtitulo.innerText = "Complet√° los datos para el registro de " + tipo;
    label.innerText = "Ingres√° los datos de la " + tipo;
    
    // Limpiamos el input por si cambi√≥ de categor√≠a
    inputPrincipal.value = ""; 

    if (tipo === 'DNI') {
        inst.innerHTML = "üÜî <strong>Documento:</strong> Ingres√° el n√∫mero de DNI completo.";
        ayuda.innerText = "* Sin puntos, solo los n√∫meros.";
        inputPrincipal.type = "number"; // Abre teclado num√©rico en celus
        inputPrincipal.maxLength = 8;   // L√≠mite DNI argentino
        inputPrincipal.placeholder = "Ej: 35123456";
    } else if (tipo === 'PATENTE' || tipo === 'CEDULA') {
        inst.innerHTML = tipo === 'CEDULA' ? "üöó <strong>C√©dula:</strong> Ingres√° la PATENTE del pl√°stico." : "üöò <strong>Patente:</strong> Ingres√° el dominio del veh√≠culo.";
        ayuda.innerText = "* Ejemplos: ABC123 o AB123CD";
        inputPrincipal.type = "text";
        inputPrincipal.maxLength = 7;   // L√≠mite patentes nuevas (AB123CD)
        inputPrincipal.placeholder = "Ej: AB123CD";
    } else {
        inst.innerHTML = "ü™™ <strong>Licencia:</strong> Ingres√° el n√∫mero de control del carnet.";
        ayuda.innerText = "* Numero de DNI que figura en el pl√°stico.";
        inputPrincipal.type = "text";
        inputPrincipal.maxLength = 15;  // Un est√°ndar seguro para licencias
        inputPrincipal.placeholder = "Ingres√° el n√∫mero";
    }
}
   </script> <script>
        function abrirModalTerminos(e) {
            if(e) e.preventDefault();
            document.getElementById('modal-terminos').style.display = 'flex';
        }

        function cerrarModalTerminos() {
            document.getElementById('modal-terminos').style.display = 'none';
        }
    </script>

    <div id="modal-terminos" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; backdrop-filter: blur(5px);">
        <div class="modal-content" style="background: #111; border: 1px solid #333; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.8);">
            <h2 style="color: #4facfe; margin-top: 0; font-size: 1.5rem; border-bottom: 1px solid #222; padding-bottom: 10px;">üìú T√©rminos y Condiciones</h2>
            <div style="color: #ccc; font-size: 0.9rem; line-height: 1.6; margin-top: 15px;">
            <p><strong>1. Rol de la Plataforma:</strong> Central Santua act√∫a √∫nicamente como un nexo digital entre hallazgos y b√∫squedas. No somos responsables por el estado de los objetos ni por las acciones de terceros.</p>
            
            <p><strong>2. Veracidad de Datos:</strong> El usuario garantiza que la informaci√≥n proporcionada es veraz. El uso de datos falsos o reportes malintencionados resultar√° en el bloqueo permanente de acceso.</p>
            
            <p><strong>3. Privacidad y Seguridad:</strong> Los n√∫meros de documento y patentes se procesan solo para detectar coincidencias (Match). Tu WhatsApp no se hace p√∫blico; solo se utiliza para gestionar la devoluci√≥n una vez confirmado el Match.</p>
            
            <p><strong>4. Devoluci√≥n Segura:</strong> Recomendamos realizar las entregas en lugares p√∫blicos (comisar√≠as, estaciones, plazas). Central Santua no participa en el intercambio f√≠sico del objeto.</p>
            
            <p><strong>5. Compromiso Social:</strong> Al usar este sistema, te compromet√©s a actuar de buena fe para que los documentos vuelvan a sus due√±os leg√≠timos sin condiciones econ√≥micas previas.</p>
            </div>
            <button onclick="cerrarModalTerminos()" style="margin-top: 25px; width: 100%; background: #4facfe; color: black; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">ENTENDIDO Y CERRAR</button>
        </div>
    </div>

    <script src="interfaz.js"></script>

</body>
</html>
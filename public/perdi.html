<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar | Central Santua</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="perdistyle.css">
</head>
<body>

    <header class="navbar">
    <nav class="container-nav-ajustado">
        <a href="index.html" class="logo-link">
            <h1 class="logo">CENTRAL<span>SANTUA</span></h1>
        </a>

        <div class="nav-acciones">
            <div id="auth-buttons" class="auth-container">
                <a href="login.html" class="btn-auth login">Ingresar</a>
                <a href="registro.html" class="btn-auth registro">Registrarse</a>
            </div>

            <button id="boton-menu-privado" class="boton-menu" onclick="toggleMenu()" style="display: none;" aria-label="Abrir men√∫">
                <span class="barrita"></span>
                <span class="barrita"></span>
                <span class="barrita"></span>
            </button>
        </div>
    </nav>
</header>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("token"); 
        const authSection = document.getElementById("auth-buttons");
        const menuBtn = document.getElementById("boton-menu-privado");

        if (token) {
            // USUARIO LOGUEADO: Forzamos mostrar men√∫ y ocultar botones
            if (authSection) authSection.style.setProperty("display", "none", "important");
            if (menuBtn) menuBtn.style.setProperty("display", "flex", "important");
        } else {
            // USUARIO NO LOGUEADO: Forzamos ocultar men√∫ y mostrar botones
            if (authSection) authSection.style.setProperty("display", "flex", "important");
            if (menuBtn) menuBtn.style.setProperty("display", "none", "important");
        }
    });
</script>

<div id="side-menu" class="menu-lateral">
    <a href="javascript:void(0)" class="cerrar-btn" onclick="toggleMenu()">&times;</a>
    <a href="index.html">Inicio</a>
    <a href="encontre.html">Encontre algo</a>
    <a href="perdi.html">Perdi algo</a>
    <a href="perfil.html">Administrar Codigos QR</a>
    <a href="tutorial.html">¬øC√≥mo funciona?</a>
    <a href="ayuda.html">Ayuda</a>
    <a href="javascript:void(0)" onclick="abrirModalTerminos(event)">T√©rminos y Condiciones</a>
    <a href="javascript:void(0)" onclick="cerrarSesion()" style="color: #ff4d4d; font-weight: bold;">Cerrar Sesi√≥n</a>
</div>

<script>
    function toggleMenu() {
        const menu = document.getElementById("side-menu");
        // Verificamos el ancho actual para saber si abrir o cerrar
        if (menu.style.width === "250px") {
            menu.style.width = "0";
        } else {
            menu.style.width = "250px";
        }
    }

    function cerrarSesion() {
        localStorage.removeItem("token");
        window.location.href = "index.html";
    }
</script>

    <main class="main-layout">
        
        <section class="form-container">
            <div class="hero-section">
                <h2>¬øQu√© est√°s buscando?</h2>
                <p id="subtitulo">Seleccion√° una categor√≠a para iniciar la b√∫squeda.</p>
            </div>

            <div class="selection-grid" id="step-1">
                <button class="select-btn" onclick="selectTypeSearch('DNI')">üÜî DNI / Documento</button>
                <button class="select-btn" onclick="selectTypeSearch('PATENTE')">üöó Patente (Auto/Moto)</button>
                <button class="select-btn" onclick="selectTypeSearch('LICENCIA')">üí≥ Licencia de Conducir</button>
                <button class="select-btn" onclick="selectTypeSearch('CEDULA')">üìÑ C√©dula Vehicular</button>
            </div>

            <form class="report-form" id="step-2" style="display: none;">
                <input type="hidden" id="tipo-search">
                
                <div class="input-group">
                    <label id="label-nro">N√∫mero o Dominio</label>
                    <input type="text" id="nro-search" placeholder="Ej: 35123456 o A123BCD" 
                           oninput="validarEntrada(this)" required>
                    <small id="ayuda-especifica" style="color: #4facfe; display: block; margin-top: 5px; font-weight: 500;"></small>
                </div>

                <div class="input-group">
                    <label>Tu WhatsApp (Con c√≥digo de √°rea)</label>
                    <input type="tel" id="whatsapp-search" placeholder="Ej: 1122334455" required>
                </div>

                <div class="verificacion-box" style="background: rgba(79, 172, 254, 0.1); border: 1px solid #4facfe;">
                    <p>üîç <strong>GUARDIA PERMANENTE:</strong> Si no lo encontramos ahora, tu b√∫squeda queda registrada. El sistema sigue buscando por vos 24/7.</p>
                </div>

                <div class="terminos-box" style="margin: 20px 0; display: flex; align-items: flex-start; gap: 10px; color: #ccc; font-size: 0.85em;">
    <input type="checkbox" id="acepto-terminos" required style="margin-top: 3px; cursor: pointer; accent-color: #4facfe;">
    <label for="acepto-terminos" style="line-height: 1.4; cursor: pointer;">
        He le√≠do y acepto los <a href="#" onclick="abrirModalTerminos()" style="color: #4facfe; text-decoration: underline;">T√©rminos de Uso y Privacidad</a>. Comprendo que Central Santua es un nexo de gesti√≥n.
    </label>
</div>

                <button type="submit" class="btn-buscar" style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: black; font-weight: bold; border: none; padding: 15px; border-radius: 8px; width: 100%; cursor: pointer; font-size: 1.1em;">
                    INICIAR B√öSQUEDA
                </button>
                
                <button type="button" class="btn-cancelar" onclick="location.reload()" style="background: none; border: 1px solid #444; color: #888; margin-top: 10px; width: 100%; padding: 10px; border-radius: 8px; cursor: pointer;">
                    ‚Üê Volver a elegir categor√≠a
                </button>
            </form>
        </section>

        <aside class="sidebar-info">
            <div class="glass-card highlight">
                <h3>Formatos Soportados</h3>
                <p>‚úÖ <strong>Autos:</strong> ABC 123 / AB 123 CD.</p>
                <p>‚úÖ <strong>Motos:</strong> 123 ABC / A123BCD.</p>
                <p>‚úÖ <strong>DNI:</strong> 7 a 8 d√≠gitos num√©ricos.</p>
            </div>
        </aside>
    </main>

    <div id="modal-resultado" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="modal-icono" class="modal-icon">üîç</div>
            <h2 id="modal-titulo">Resultado de B√∫squeda</h2>
            <p id="modal-mensaje">Cargando informaci√≥n...</p>
            <div id="area-contacto" style="display: none;"></div>
            <button onclick="cerrarModal()" class="btn-cerrar-modal" id="btn-entendido" style="margin-top: 20px;">Entendido</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Central Santua - Buscando lo que es tuyo.</p>
    </footer>

    <script src="script.js"></script>
    <script>
        let currentType = '';

        function selectTypeSearch(tipo) {
            // 1. SINCRONIZACI√ìN CON SCRIPT.JS
            if (typeof seleccionarCategoria === "function") {
                seleccionarCategoria(tipo);
            }

            currentType = tipo;
            document.getElementById('step-1').style.display = 'none';
            document.getElementById('step-2').style.display = 'block';
            document.getElementById('tipo-search').value = tipo;
            
            const inst = document.getElementById('instruccion-dinamica');
            const ayuda = document.getElementById('ayuda-especifica');
            const label = document.getElementById('label-nro');
            const input = document.getElementById('nro-search');

            input.value = ''; 
            label.innerText = "N√∫mero de " + tipo;

            if (tipo === 'CEDULA') {
                inst.innerHTML = "üöó <strong>C√©dula:</strong> Ingres√° la PATENTE de la c√©dula perdida.";
                ayuda.innerText = "* Us√° la patente (Ej: ABC123 o AB123CD)";
            } else if (tipo === 'DNI') {
                inst.innerHTML = "üÜî <strong>DNI:</strong> Ingres√° entre 7 y 8 n√∫meros.";
                ayuda.innerText = "* Solo n√∫meros, sin puntos.";
            } else if (tipo === 'PATENTE') {
                inst.innerHTML = "üöò <strong>Patente:</strong> Ingres√° el dominio (ABC123 o AB123CD).";
                ayuda.innerText = "* Letras y n√∫meros juntos.";
            } else {
                inst.innerHTML = "ü™™ <strong>Licencia:</strong> Ingres√° el n√∫mero de control.";
                ayuda.innerText = "* Numero de DNI que figura en el pl√°stico.";
            }
        }

        function validarEntrada(input) {
            let valor = input.value.toUpperCase().replace(/\s/g, ''); 
            
            if (currentType === 'DNI') {
                valor = valor.replace(/\D/g, ''); 
                if (valor.length > 8) valor = valor.slice(0, 8); 
            } else if (currentType === 'PATENTE' || currentType === 'CEDULA') {
                valor = valor.replace(/[^A-Z0-9]/g, ''); 
                if (valor.length > 7) valor = valor.slice(0, 7); 
            }
            input.value = valor;
        }

        // Estas son las funciones que te faltaban para que el bot√≥n funcione:
        function abrirModalTerminos(e) {
            if(e) e.preventDefault();
            document.getElementById('modal-terminos').style.display = 'flex';
        }

        function cerrarModalTerminos() {
            document.getElementById('modal-terminos').style.display = 'none';
        }
    </script> <div id="modal-terminos" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; backdrop-filter: blur(5px);">
        <div class="modal-content" style="background: #111; border: 1px solid #333; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.8);">
            <h2 style="color: #4facfe; margin-top: 0; font-size: 1.5rem; border-bottom: 1px solid #222; padding-bottom: 10px;">üìú T√©rminos y Condiciones</h2>
            <div style="color: #ccc; font-size: 0.9rem; line-height: 1.6; margin-top: 15px;">
            <p><strong>1. Rol de la Plataforma:</strong> Central Santua act√∫a √∫nicamente como un nexo digital entre hallazgos y b√∫squedas. No somos responsables por el estado de los objetos ni por las acciones de terceros.</p>
            
            <p><strong>2. Veracidad de Datos:</strong> El usuario garantiza que la informaci√≥n proporcionada es veraz. El uso de datos falsos o reportes malintencionados resultar√° en el bloqueo permanente de acceso.</p>
            
            <p><strong>3. Privacidad y Seguridad:</strong> Los n√∫meros de documento y patentes se procesan solo para detectar coincidencias (Match). Tu WhatsApp no se hace p√∫blico; solo se utiliza para gestionar la devoluci√≥n una vez confirmado el Match.</p>
            
            <p><strong>4. Devoluci√≥n Segura:</strong> Recomendamos realizar las entregas en lugares p√∫blicos (comisar√≠as, estaciones, plazas). Central Santua no participa en el intercambio f√≠sico del objeto.</p>
            
            <p><strong>5. Compromiso Social:</strong> Al usar este sistema, te compromet√©s a actuar de buena fe para que los documentos vuelvan a sus due√±os leg√≠timos sin condiciones econ√≥micas previas.</p>
            </div>
            <button onclick="cerrarModalTerminos()" style="margin-top: 25px; width: 100%; background: #4facfe; color: black; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">ENTENDIDO Y CERRAR</button>
        </div>
    </div>

    <script src="interfaz.js"></script>
</body>
</html>